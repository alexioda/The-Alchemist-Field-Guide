import React, { useState } from 'react';
import { Lock, Shield, Smartphone, Activity, BookOpen, Brain, Zap, ArrowRight, CheckCircle2 } from 'lucide-react';

export default function App() {
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [passwordInput, setPasswordInput] = useState('');
  const [error, setError] = useState('');
  const [activeTab, setActiveTab] = useState('somatic');

  // Array of accepted compliance, cohort, and demo passwords
  const VALID_PASSCODES = ['KINETIC2026', 'GENESIS2026', 'DEMO', 'MASTER'];

  const handleLogin = (e) => {
    e.preventDefault();
    
    // Clean the input by removing spaces and forcing uppercase, then check if it's in the valid list
    const cleanInput = passwordInput.trim().toUpperCase();
    
    if (VALID_PASSCODES.includes(cleanInput)) {
      setIsAuthenticated(true);
      setError('');
    } else {
      setError('Decryption Key Invalid. Please check your Command Center PDF.');
    }
  };

  // ------------------------------------------------------------------------
  // SECURE LOCK SCREEN (Shown before correct password)
  // ------------------------------------------------------------------------
  if (!isAuthenticated) {
    return (
      <div className="min-h-screen bg-stone-900 flex flex-col items-center justify-center p-6 font-sans">
        <div className="max-w-md w-full bg-stone-800/50 p-8 rounded-2xl border border-stone-700 shadow-2xl relative overflow-hidden">
          <div className="absolute top-0 right-0 p-32 bg-gold-500/5 rounded-full blur-3xl pointer-events-none"></div>
          
          <div className="relative z-10 text-center mb-8">
            <div className="w-16 h-16 bg-stone-900 border border-stone-700 rounded-xl flex items-center justify-center mx-auto mb-6 text-gold-500 shadow-inner">
              <Lock className="w-8 h-8" />
            </div>
            <h1 className="text-3xl font-serif italic text-white mb-2">System Locked</h1>
            <p className="text-stone-400 text-sm">Enter the Decryption Key from your Command Center PDF to access the architecture.</p>
          </div>

          <form onSubmit={handleLogin} className="relative z-10 space-y-6">
            <div>
              <input
                type="password"
                value={passwordInput}
                onChange={(e) => setPasswordInput(e.target.value)}
                placeholder="Enter Decryption Key"
                className="w-full bg-stone-900 border border-stone-700 rounded-xl px-4 py-4 text-white placeholder-stone-500 focus:outline-none focus:border-gold-500 focus:ring-1 focus:ring-gold-500 transition-all text-center tracking-widest uppercase text-sm"
              />
              {error && <p className="text-red-400 text-xs text-center mt-3 uppercase tracking-wider font-bold">{error}</p>}
            </div>
            <button
              type="submit"
              className="w-full py-4 bg-gold-500 hover:bg-gold-400 text-stone-900 font-bold rounded-xl text-[10px] uppercase tracking-widest transition-all shadow-[0_0_20px_rgba(245,158,11,0.2)] hover:shadow-[0_0_25px_rgba(245,158,11,0.4)]"
            >
              Initiate Protocol
            </button>
          </form>
        </div>
        <p className="mt-8 text-[10px] text-stone-500 uppercase tracking-widest">&copy; 2026 LiveAdaptiv</p>
      </div>
    );
  }

  // ------------------------------------------------------------------------
  // MAIN APPLICATION PORTAL (Shown after correct password)
  // ------------------------------------------------------------------------
  return (
    <div className="min-h-screen bg-stone-50 font-sans text-stone-900">
      
      {/* Top Navigation Bar */}
      <nav className="w-full bg-white border-b border-stone-200 sticky top-0 z-50 shadow-sm">
        <div className="max-w-4xl mx-auto px-6 h-16 flex items-center justify-between">
          <div className="flex items-center gap-2">
            <div className="w-8 h-8 bg-stone-900 text-white flex items-center justify-center font-serif italic text-lg rounded-md">A</div>
            <span className="font-serif text-xl tracking-wide font-semibold">The Alchemist</span>
          </div>
          <div className="flex items-center gap-2 text-[10px] uppercase tracking-widest font-bold text-stone-400">
            <Activity className="w-3 h-3 text-gold-500" />
            <span>Secure Session</span>
          </div>
        </div>
      </nav>

      <main className="max-w-4xl mx-auto px-6 py-12">
        
        {/* Header Section */}
        <header className="mb-12 text-center md:text-left">
          <span className="inline-block py-1 px-3 border border-stone-300 rounded-full text-[10px] uppercase tracking-[0.2em] text-stone-500 mb-4 bg-white">
            Deep Work Architecture
          </span>
          <h1 className="text-4xl md:text-5xl font-serif italic text-stone-900 mb-4">The Alchemist Field Guide</h1>
          <p className="text-stone-500 text-lg font-light max-w-2xl leading-relaxed">
            Welcome to the inner architecture. Use these active frameworks to map somatic friction, rewrite internal narratives, and alchemize stress into high-leverage focus.
          </p>
        </header>

        {/* Clinical Tabs */}
        <div className="flex overflow-x-auto hide-scrollbar gap-2 mb-8 pb-2">
          <button 
            onClick={() => setActiveTab('somatic')}
            className={`whitespace-nowrap px-6 py-3 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all flex items-center gap-2 ${activeTab === 'somatic' ? 'bg-stone-900 text-white shadow-md' : 'bg-white text-stone-500 border border-stone-200 hover:bg-stone-100'}`}
          >
            <Activity className="w-4 h-4" /> Somatic Map
          </button>
          <button 
            onClick={() => setActiveTab('script')}
            className={`whitespace-nowrap px-6 py-3 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all flex items-center gap-2 ${activeTab === 'script' ? 'bg-stone-900 text-white shadow-md' : 'bg-white text-stone-500 border border-stone-200 hover:bg-stone-100'}`}
          >
            <Brain className="w-4 h-4" /> Script Generator
          </button>
          <button 
            onClick={() => setActiveTab('biology')}
            className={`whitespace-nowrap px-6 py-3 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all flex items-center gap-2 ${activeTab === 'biology' ? 'bg-stone-900 text-white shadow-md' : 'bg-white text-stone-500 border border-stone-200 hover:bg-stone-100'}`}
          >
            <Zap className="w-4 h-4" /> Biology of Belief
          </button>
        </div>

        {/* Tab Content Areas */}
        <div className="bg-white rounded-2xl border border-stone-200 shadow-sm p-6 md:p-10 min-h-[400px]">
          
          {activeTab === 'somatic' && (
            <div className="animate-in fade-in duration-500">
              <h2 className="text-3xl font-serif italic text-stone-900 mb-2">The Somatic Map</h2>
              <p className="text-stone-500 text-sm mb-8">Locate the physical anchor of your current psychological friction.</p>
              
              <div className="space-y-6">
                <div>
                  <label className="block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2">1. Physical Sensation</label>
                  <textarea 
                    className="w-full bg-stone-50 border border-stone-200 rounded-xl p-4 text-stone-700 focus:outline-none focus:border-stone-400 focus:ring-1 focus:ring-stone-400 transition-all min-h-[100px]"
                    placeholder="Where do you feel the stress in your body right now? (e.g., Tightness in chest, shallow breathing...)"
                  ></textarea>
                </div>
                <div>
                  <label className="block text-[10px] font-bold uppercase tracking-widest text-stone-400 mb-2">2. The Attached Narrative</label>
                  <textarea 
                    className="w-full bg-stone-50 border border-stone-200 rounded-xl p-4 text-stone-700 focus:outline-none focus:border-stone-400 focus:ring-1 focus:ring-stone-400 transition-all min-h-[100px]"
                    placeholder="What is the story your ego is telling you about this sensation? (e.g., 'If I fail this presentation, my career is over...')"
                  ></textarea>
                </div>
              </div>
            </div>
          )}

          {activeTab === 'script' && (
            <div className="animate-in fade-in duration-500">
              <h2 className="text-3xl font-serif italic text-stone-900 mb-2">Boundary Script Generator</h2>
              <p className="text-stone-500 text-sm mb-8">Construct clinical language to defend your energy without burning professional bridges.</p>
              
              <div className="grid md:grid-cols-2 gap-6">
                <div className="bg-stone-50 p-6 rounded-xl border border-stone-200">
                  <h4 className="font-bold text-xs uppercase tracking-widest text-stone-900 mb-4 flex items-center gap-2">
                    <CheckCircle2 className="w-4 h-4 text-gold-500" /> The Delay Protocol
                  </h4>
                  <p className="text-sm text-stone-600 italic">"I have received your request. Let me review my current bandwidth against our primary objectives and I will provide a timeline by [Time/Day]."</p>
                </div>
                <div className="bg-stone-50 p-6 rounded-xl border border-stone-200">
                  <h4 className="font-bold text-xs uppercase tracking-widest text-stone-900 mb-4 flex items-center gap-2">
                    <CheckCircle2 className="w-4 h-4 text-gold-500" /> The Prioritization Protocol
                  </h4>
                  <p className="text-sm text-stone-600 italic">"I can absolutely take point on this. In order to execute this at the highest level, which of my current three deliverables should we pause?"</p>
                </div>
              </div>
            </div>
          )}

          {activeTab === 'biology' && (
            <div className="animate-in fade-in duration-500">
              <h2 className="text-3xl font-serif italic text-stone-900 mb-2">The 90-Second Rule</h2>
              <p className="text-stone-500 text-sm mb-8">Understanding the physics of your biological stress response.</p>
              
              <div className="prose prose-stone max-w-none text-stone-600 font-light leading-relaxed">
                <p>When you are triggered, the chemical dump of adrenaline and cortisol takes exactly <strong>90 seconds</strong> to flush through your bloodstream. After 90 seconds, the physiological response is over.</p>
                <p>If you remain stressed, angry, or panicked after 90 seconds, it is because your cognitive brain has chosen to replay the narrative, triggering a brand new chemical dump.</p>
                <div className="bg-stone-900 text-white p-6 rounded-xl mt-6">
                  <h4 className="font-serif italic text-xl mb-2 text-gold-400">The Intervention</h4>
                  <p className="text-sm mb-0">Do not fight the 90 seconds. Observe it. Let the heat rise in your chest. When the 90 seconds is up, you must actively choose to interrupt the narrative. Step out of the room, wash your face with cold water, or use the Sovereign App.</p>
                </div>
              </div>
            </div>
          )}

        </div>

        {/* ------------------------------------------------------------------------
            THE COMPLETE YOUR ECOSYSTEM SECTION (WITH RESPONSIVE FIX)
            ------------------------------------------------------------------------ */}
        <div className="mt-12 p-8 bg-stone-900 rounded-2xl border border-stone-800 shadow-2xl relative overflow-hidden">
          <div className="absolute top-0 right-0 p-32 bg-gold-500/5 rounded-full blur-3xl pointer-events-none"></div>
          
          <div className="relative z-10">
            <h3 className="font-serif text-3xl italic text-white mb-2">Complete Your Ecosystem</h3>
            <p className="text-stone-400 text-sm mb-8 max-w-xl">
              This field guide is your deep-work map. For real-time, daily acute stress triage, keep the Sovereign App bookmarked on your phone. To upgrade your architecture, return to the Hub.
            </p>
            
            {/* The Magic Fix: flex-col on mobile, sm:flex-row on desktop */}
            <div className="flex flex-col sm:flex-row gap-4 w-full">
              <a 
                href="https://www.liveadaptiv.com" 
                target="_blank" 
                rel="noopener noreferrer"
                className="w-full flex-1 py-4 px-6 bg-gold-500 hover:bg-gold-400 text-stone-900 text-[10px] font-bold uppercase tracking-widest text-center rounded-xl transition-all flex items-center justify-center gap-2"
              >
                <Shield className="w-4 h-4" /> Return to Main Hub
              </a>
              <a 
                href="https://app.liveadaptiv.com" 
                target="_blank" 
                rel="noopener noreferrer"
                className="w-full flex-1 py-4 px-6 bg-stone-800 border border-stone-700 text-white hover:bg-stone-700 text-[10px] font-bold uppercase tracking-widest text-center rounded-xl transition-all flex items-center justify-center gap-2"
              >
                <Smartphone className="w-4 h-4 text-stone-400" /> Open Sovereign App
              </a>
            </div>
          </div>
        </div>

      </main>

      <footer className="text-center pb-12 text-[10px] text-stone-400 uppercase tracking-widest font-bold">
        LiveAdaptiv Clinical Architecture
      </footer>
    </div>
  );
}
